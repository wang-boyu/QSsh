version: '{build}'

branches:
  only:
    - master

shallow_clone: true

image:
  #- Visual Studio 2013
  - Visual Studio 2015
  #- Visual Studio 2017

environment:
  MSBUILD_FLAGS: /verbosity:minimal /maxcpucount
  matrix:
  - CMAKE_GENERATOR: "Visual Studio 14 2015"
    QT5: C:\Qt\5.8\mingw53_32
  - CMAKE_GENERATOR: "Visual Studio 14 2015"
    QT5: C:\Qt\5.8\msvc2015
  - CMAKE_GENERATOR: "Visual Studio 14 2015 Win64"
    QT5: C:\Qt\5.8\msvc2015_64

#matrix:
  #fast_finish: true

before_build:
  - set Path=%QT5%\bin;%Path%
  - mkdir build
  - cd build
  - cmake .. -G "%CMAKE_GENERATOR%" -DCMAKE_PREFIX_PATH="%QT5%"

build_script:
  - cmake --build . -- %MSBUILD_FLAGS%


